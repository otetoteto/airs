# Rust コーディング指示

*   **フォーマット:** `rustfmt` を使用してコードをフォーマットしてください。
*   **Lint:** `clippy::all` のリントに従ってください。提案するコードは Clippy の警告が出ないようにしてください。
*   **エラーハンドリング:** 回復可能なエラーには `panic!` ではなく `Result<T, E>` を使用してください。エラー型には `thiserror` または `anyhow` クレートの使用を検討してください。
*   **Unsafe コード:** `unsafe` ブロックの使用は、それが絶対に必要であり、その理由が明確に文書化されている場合に限定してください。
*   **所有権とライフタイム:** Rust の所有権と借用規則を厳守してください。コンパイラが推論できない場合は、明示的なライフタイム注釈を提案してください。
*   **非同期処理:** 非同期コードには `async`/`await` 構文と `tokio` または `async-std` ランタイムを使用してください。
*   **テスト:** 標準の `#[test]` 属性と `assert!` / `assert_eq!` マクロを使用して単体テストと統合テストを作成してください。
*   **ドキュメンテーション:** すべての公開アイテム (`pub`) に対して Rustdoc コメント (`///`) を生成してください。例 (`Examples`) やパニック条件 (`Panics`)、安全性に関する注意 (`Safety`) も含めてください。
*   **命名規則:** 変数、関数、モジュールには `snake_case` を、型、トレイト、enum には `PascalCase` を使用してください。
*   **イディオム:** イテレータ、パターンマッチング、`Option` と `Result` のメソッドなど、Rust の慣用的な表現を活用してください。C スタイルのループや手動でのメモリ管理は避けてください。
*   **依存関係:** `Cargo.toml` で依存関係を管理してください。クレートを追加する際は、広く使われており、よくメンテナンスされているものを優先してください。
*   **モジュール:** コードを論理的なモジュールに整理してください。`mod` キーワードを使用し、必要に応じて別ファイル (`src/module_name.rs` または `src/module_name/mod.rs`) に分割します。アイテムの可視性は `pub` で適切に制御し、`use` キーワードでパスを管理してください。